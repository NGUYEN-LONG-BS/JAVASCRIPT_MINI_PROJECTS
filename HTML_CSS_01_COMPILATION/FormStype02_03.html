<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
margin: 0;
padding: 0;
font-family: Arial, sans-serif;
display: flex;
flex-direction: column;
height: 100vh;
}
.logo-container {
text-align: center;
margin-top: 20px;
}
.logo {
max-width: 100px; /* Adjust the size as needed */
}
form {
background-color: #e0f7fa; /* Light blue background */
padding: 20px;
border-radius: 5px;
max-width: 600px;
margin: auto;
border: 2px solid #00796b; /* Blue border */
position: fixed;
top: 80px; /* Adjust to avoid overlap with logo */
left: 50%;
transform: translateX(-50%);
width: 100%;
max-width: 600px;
z-index: 1000;
}
.form-group {
display: flex;
justify-content: space-between;
margin-bottom: 15px;
}
.form-group label {
flex: 1;
margin-right: 10px;
color: #00796b; /* Darker blue for text */
}
.form-group input {
flex: 2;
padding: 8px;
border: 1px solid #00796b;
border-radius: 3px;
}
.table-container {
flex: 1;
overflow-y: auto;
padding: 20px;
margin-top: 300px; /* Adjust to avoid overlap with fixed form */
margin-bottom: 60px; /* Adjust to avoid overlap with fixed buttons */
}
table {
width: 100%;
border-collapse: collapse;
}
table, th, td {
border: 1px solid #00796b;
}
th, td {
padding: 10px;
text-align: left;
}
th {
position: sticky;
top: 0;
background-color: #e0f7fa;
z-index: 1;
}
.selected {
background-color: #b2ebf2; /* Highlight selected cell */
}
.button-container {
position: fixed;
bottom: 0;
left: 0;
width: 100%;
background-color: #e0f7fa;
padding: 10px;
display: flex;
justify-content: center;
gap: 10px;
border-top: 2px solid #00796b;
}
.button-container button {
background-color: #00796b;
color: white;
padding: 10px 15px;
border: none;
border-radius: 3px;
cursor: pointer;
}
.button-container button:hover {
background-color: #004d40; /* Darker shade on hover */
}
</style>
</head>
<body>
    <div class="logo-container">
    <img src="TALA_LOGO.png" alt="Logo" class="logo"> <!-- Add your logo source here -->
    </div>

    <form id="infoForm">
    <div class="form-group">
    <label for="soPhieu">Số phiếu:</label>
    <input name="soPhieu" id="soPhieu" type="text" required>
    </div>
    <div class="form-group">
    <label for="ngay">Ngày:</label>
    <input name="ngay" id="ngay" type="date" required>
    </div>
    <div class="form-group">
    <label for="maKhachHang">Mã khách hàng:</label>
    <input name="maKhachHang" id="maKhachHang" type="text" required>
    </div>
    <div class="form-group">
    <label for="tenKhachHang">Tên khách hàng:</label>
    <input name="tenKhachHang" id="tenKhachHang" type="text" required>
    </div>
    <div class="form-group">
    <label for="soDeNghiXuat">Số đề nghị xuất:</label>
    <input name="soDeNghiXuat" id="soDeNghiXuat" type="text" required>
    </div>
    </form>

    <div class="table-container">
        <table id="dataTable">
            <thead>
                <tr>
                <th>Mã hàng</th>
                <th>Tên hàng</th>
                <th>DVT</th>
                <th>Số lượng</th>
                <th>Đơn giá</th>
                <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                <td contenteditable="true"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="button-container">
    <button onclick="saveTable()">Save</button>
    <button onclick="importTable()">Import</button>
    <button onclick="printTable()">Print</button>
    <button onclick="listTable()">List</button>
    </div>

<script>
document.addEventListener('keydown', function(event) {
const selectedCell = document.querySelector('.selected');
if (!selectedCell) return;

const table = document.getElementById('dataTable');
const cells = Array.from(table.querySelectorAll('td[contenteditable="true"]'));
const currentIndex = cells.indexOf(selectedCell);

if (event.key === 'Tab') {
event.preventDefault();
const nextIndex = (currentIndex + 1) % cells.length;
cells[nextIndex].focus();
selectCell(cells[nextIndex]);
} else if (event.key === 'Enter') {
event.preventDefault();
addNewRow();
} else if (event.key === 'Delete') {
event.preventDefault();
deleteSelectedRow();
}
});

document.addEventListener('click', function(event) {
if (event.target.tagName === 'TD' && event.target.hasAttribute('contenteditable')) {
selectCell(event.target);
}
});

function selectCell(cell) {
const selectedCell = document.querySelector('.selected');
if (selectedCell) {
selectedCell.classList.remove('selected');
}
cell.classList.add('selected');
}

function addNewRow() {
const table = document.getElementById('dataTable').getElementsByTagName('tbody')[0];
const newRow = table.insertRow();
for (let i = 0; i < 6; i++) {
const newCell = newRow.insertCell(i);
newCell.contentEditable = "true";
newCell.addEventListener('input', calculateThanhTien);
}
}

function deleteSelectedRow() {
const selectedCell = document.querySelector('.selected');
if (selectedCell) {
const row = selectedCell.parentNode;
row.parentNode.removeChild(row);
} else {
alert('Please select a row to delete.');
}
}

function calculateThanhTien() {
const row = this.parentNode;
const soLuong = parseFloat(row.cells[3].textContent.replace(/\./g, '')) || 0;
const donGia = parseFloat(row.cells[4].textContent.replace(/\./g, '')) || 0;
const thanhTien = soLuong * donGia;
row.cells[5].textContent = formatNumber(thanhTien);
}

function formatNumber(number) {
return number.toLocaleString('vi-VN');
}

document.querySelectorAll('td[contenteditable="true"]').forEach(cell => {
cell.addEventListener('input', calculateThanhTien);
});

function saveTable() {
alert('Save functionality not implemented yet.');
}

function importTable() {
alert('Import functionality not implemented yet.');
}

function printTable() {
window.print();
}

function listTable() {
alert('List functionality not implemented yet.');
}
</script>
</body>
</html>